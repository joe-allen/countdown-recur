!function(e){e.fn.countdown_timer=function(s){var t=e.extend({deadline:"",deadlineText:"Sorry, this event has expired.",debug:!1,endDay:"Sunday",endTime:"11:59:59 pm",isBeforeDeadline:!1,nextDeadline:"",now:"",progress:0,recurDay:"",startDate:void 0==s.startDate?moment().format("MM/DD/YYYY"):s.startDate,timeObj:{days:"",hours:"",minutes:"",seconds:""},timeRemaining:"",weeksToRecur:104},s),i=this;i.css({color:null!=s.textColor?s.textColor:"green","flex-direction":t.debug?"column":"row","align-items":"center"});var n={jqCache:function(){n.$seconds_progress=e("#seconds_progress--js"),n.$next_deadline=e("#next_deadline--js"),n.$current_time=e("#current_time--js"),n.$before_date=e("#before_date--js"),n.$time_zone=e("#time_zone--js"),n.$time_left=e("#time_left--js"),n.$clock_days=e("#days--js"),n.$clock_hours=e("#hrs--js"),n.$clock_minutes=e("#mins--js"),n.$clock_seconds=e("#secs--js"),n.$times_up=e("#timesup--js")},getDeadline:function(){var e,s=moment().add(7,"d").format("MM/DD/YYYY");for(e=0;e<t.recurDay.length;e++){if(t.recurDay[e]==s)return t.now.format("MM/DD/YYYY")+" "+t.endTime;if(t.debug&&t.recurDay[e]==t.now.format("MM/DD/YYYY")&&t.now.format("hh:mm:ss a")>t.endTime)return t.recurDay[e+1]+" "+t.endTime;if(t.recurDay[e]+" "+t.endTime>=t.now.format("MM/DD/YYYY")+" "+t.endTime)return t.deadline=t.recurDay[e]+" "+t.endTime}return!1},getDiff:function(){var e=moment.duration(moment().diff(t.nextDeadline)),s=Math.abs(e.asSeconds());t.timeObj.days=Math.abs(e.days()),t.timeObj.hours=Math.abs(e.hours()),t.timeObj.minutes=Math.abs(e.minutes()),t.timeObj.seconds=Math.abs(e.seconds());var i=t.timeObj.days,d=t.timeObj.hours,c=t.timeObj.minutes,o=t.timeObj.seconds;return n.getProgress(s),t.timeObj.hours=d<=9?"0"+d:d,t.timeObj.minutes=c<=9?"0"+c:c,t.timeObj.seconds=o<=9?"0"+o:o,t.timeRemaining=i+" days "+t.timeObj.hours+":"+t.timeObj.minutes+":"+t.timeObj.seconds},getProgress:function(e){var s=604800,i=s-e,n=Math.round(i/s*100*100)/100;return t.progress=n},getCountDownState:function(){return t.isBeforeDeadline=moment(t.nextDeadline).isAfter(moment())},setElements:function(){return t.debug?i.html('<div class="clock_container"><div class="days clock_content_container"><div id="days--js" class="num">'+t.timeObj.days+'</div><div class="text">Days</div></div><div class="hours clock_content_container"><div id="hrs--js" class="hrs">'+t.timeObj.hours+'</div><div class="text">Hours</div></div><div class="minutes clock_content_container"><div id="mins--js" class="mins">'+t.timeObj.minutes+'</div><div class="text">Minutes</div></div><div class="seconds clock_content_container"><div id="secs--js" class="secs">'+t.timeObj.seconds+'</div><div class="text">Seconds</div></div></div><div class="clock_container" style="border-top: 4px solid firebrick; margin-top: 40px; padding-top: 40px; font-size: .75em; text-align: center;"><div class="seconds clock_content_container"><div class="text">Next deadline:</div><div id="secs--js" class="secs">'+t.nextDeadline+'</div></div><div class="seconds clock_content_container"><div class="text">Debug mode:</div><div id="secs--js" class="secs">'+t.debug+'</div></div><div class="seconds clock_content_container"><div class="text">You arrived at:</div><div id="secs--js" class="secs">'+t.now.format("LLLL")+"</div></div></div>"):t.isBeforeDeadline?i.html('<div class="days clock_content_container"><div id="days--js" class="num">'+t.timeObj.days+'</div><div class="text">Days</div></div><div class="hours clock_content_container"><div id="hrs--js" class="hrs">'+t.timeObj.hours+'</div><div class="text">Hours</div></div><div class="minutes clock_content_container"><div id="mins--js" class="mins">'+t.timeObj.minutes+'</div><div class="text">Minutes</div></div><div class="seconds clock_content_container"><div id="secs--js" class="secs">'+t.timeObj.seconds+'</div><div class="text">Seconds</div></div>'):i.html('<div class="clock_content_container"><div id="times_up" class="text">'+t.deadlineText+'</div></div><span id="seconds_progress--js" class="countdown_progress"></span>')},init:function(){var e=moment.tz.guess();t.now=void 0!=typeof e||null!=typeof e?moment.tz(e):moment(),t.recurDay=moment(t.startDate).recur().every([null!=s.endDay?s.endDay:"Sunday"]).daysOfWeek().next(t.weeksToRecur,"L"),t.nextDeadline=n.getDeadline(),t.timeRemaining=n.getDiff(),t.isBeforeDeadline=n.getCountDownState(),n.jqCache(),n.setElements(),!0!==t.isBeforeDeadline||t.debug||setInterval(function(){n.getDiff(),n.setElements(),n.getCountDownState(),t.nextDeadline=n.getDeadline()},1e3)}};return n.init()}}(jQuery);